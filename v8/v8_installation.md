# Notes on installing old v8 Engine

To checkout and build old v8 Engine:

1) Download depot_tools:
   Following instructions from https://commondatastorage.googleapis.com/chrome-infra-docs/flat/depot_tools/docs/html/depot_tools_tutorial.html#_setting_up:
   
   ```
   git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
   export PATH=/path/to/depot_tools:$PATH
   ```

2) Download the v8 git. This is different than actual fetch later.
   
   ```
   git clone --depth 1 --branch <tag or version> https://chromium.googlesource.com/v8/v8.git
   ```
   
   Then get the commit date.
   
   ```
   cd v8 && COMMIT_DATE=$(git log -n 1 --pretty=format:%ci)
   ```
   
   You may delete the v8 directory and its contents
   Then you have to go back to depot_tools directory and checkout the branch according to the
   acquired date from v8 repo.
   
   ```
   git checkout $(git rev-list -n 1 --before="$COMMIT_DATE" main)
   export DEPOT_TOOLS_UPDATE=0
   git clean -ffd
   ```

3) Download v8 with fetch:
   
   ```
   mkdir $V8_PATH
   cd $V8_PATH
   fetch v8 # -> This may take a while
   ``` 
   
   An error may appear about syntax or missing module. For double checking, if "ls -la" is ran,
   .gclient file should have been created

4)  gclient sync execution to get dependencies
   
    ```
    gclient sync
    ```
   
5) Building the v8:
   
   ```
   cd $V8_PATH/v8
   tools/dev/v8gen.py x64.release # or x64.debug (?) not tried yet
   ```
   
   At this time, arguments can be set on out.gn/x64.release/args.gn
   is_debug=true can be set there
   After editing the args.gn file, building now with ninja from the v8 directory
   
   ```
   ninja -C out.gn/x64.release/ 
   ```
   
   After that, binaries and d8 should be available on out.gn/x64.release/
   
   
   
   
